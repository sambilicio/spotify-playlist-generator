{"ast":null,"code":"const CLIENT_ID = process.env.REACT_APP_SPOTIFY_CLIENT_ID;\nconst CLIENT_SECRET = process.env.REACT_APP_SPOTIFY_CLIENT_SECRET;\nasync function getAccessToken() {\n  const response = await fetch('https://accounts.spotify.com/api/token', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'Authorization': 'Basic ' + btoa(CLIENT_ID + ':' + CLIENT_SECRET)\n    },\n    body: 'grant_type=client_credentials'\n  });\n  if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n  const data = await response.json();\n  return data.access_token;\n}\nexport async function searchTracks(query) {\n  try {\n    const token = await getAccessToken();\n    console.log('Access token:', token);\n\n    // Use the full query string\n    const url = `https://api.spotify.com/v1/search?q=${encodeURIComponent(query)}&type=track&limit=100`;\n    console.log('Request URL:', url);\n    const response = await fetch(url, {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    if (!response.ok) {\n      const errorBody = await response.text();\n      console.error('Error response:', errorBody);\n      throw new Error(`HTTP error! status: ${response.status}, body: ${errorBody}`);\n    }\n    const data = await response.json();\n    console.log('API response:', data); // Log the full response\n\n    if (!data.tracks || !data.tracks.items) {\n      console.error('Unexpected API response structure:', data);\n      return [];\n    }\n    const tracksWithPreviews = data.tracks.items.filter(track => track.preview_url);\n    const limitedTracks = tracksWithPreviews.slice(0, 8);\n    return limitedTracks;\n  } catch (error) {\n    console.error('Error in searchTracks:', error);\n    return [];\n  }\n}","map":{"version":3,"names":["CLIENT_ID","process","env","REACT_APP_SPOTIFY_CLIENT_ID","CLIENT_SECRET","REACT_APP_SPOTIFY_CLIENT_SECRET","getAccessToken","response","fetch","method","headers","btoa","body","ok","Error","status","data","json","access_token","searchTracks","query","token","console","log","url","encodeURIComponent","errorBody","text","error","tracks","items","tracksWithPreviews","filter","track","preview_url","limitedTracks","slice"],"sources":["/Users/samsears/Desktop/spotify-playlist-generator/src/services/spotifyService.js"],"sourcesContent":["const CLIENT_ID = process.env.REACT_APP_SPOTIFY_CLIENT_ID;\nconst CLIENT_SECRET = process.env.REACT_APP_SPOTIFY_CLIENT_SECRET;\n\nasync function getAccessToken() {\n  const response = await fetch('https://accounts.spotify.com/api/token', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'Authorization': 'Basic ' + btoa(CLIENT_ID + ':' + CLIENT_SECRET)\n    },\n    body: 'grant_type=client_credentials'\n  });\n\n  if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n\n  const data = await response.json();\n  return data.access_token;\n}\n\nexport async function searchTracks(query) {\n  try {\n    const token = await getAccessToken();\n    console.log('Access token:', token);\n\n    // Use the full query string\n    const url = `https://api.spotify.com/v1/search?q=${encodeURIComponent(query)}&type=track&limit=100`;\n    console.log('Request URL:', url);\n\n    const response = await fetch(url, {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n\n    if (!response.ok) {\n      const errorBody = await response.text();\n      console.error('Error response:', errorBody);\n      throw new Error(`HTTP error! status: ${response.status}, body: ${errorBody}`);\n    }\n\n    const data = await response.json();\n    console.log('API response:', data); // Log the full response\n\n    if (!data.tracks || !data.tracks.items) {\n      console.error('Unexpected API response structure:', data);\n      return [];\n    }\n\n    const tracksWithPreviews = data.tracks.items.filter(track => track.preview_url);\n    const limitedTracks = tracksWithPreviews.slice(0, 8);\n    return limitedTracks;\n  } catch (error) {\n    console.error('Error in searchTracks:', error);\n    return [];\n  }\n}"],"mappings":"AAAA,MAAMA,SAAS,GAAGC,OAAO,CAACC,GAAG,CAACC,2BAA2B;AACzD,MAAMC,aAAa,GAAGH,OAAO,CAACC,GAAG,CAACG,+BAA+B;AAEjE,eAAeC,cAAcA,CAAA,EAAG;EAC9B,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,wCAAwC,EAAE;IACrEC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE,mCAAmC;MACnD,eAAe,EAAE,QAAQ,GAAGC,IAAI,CAACX,SAAS,GAAG,GAAG,GAAGI,aAAa;IAClE,CAAC;IACDQ,IAAI,EAAE;EACR,CAAC,CAAC;EAEF,IAAI,CAACL,QAAQ,CAACM,EAAE,EAAE;IAChB,MAAM,IAAIC,KAAK,CAAC,uBAAuBP,QAAQ,CAACQ,MAAM,EAAE,CAAC;EAC3D;EAEA,MAAMC,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;EAClC,OAAOD,IAAI,CAACE,YAAY;AAC1B;AAEA,OAAO,eAAeC,YAAYA,CAACC,KAAK,EAAE;EACxC,IAAI;IACF,MAAMC,KAAK,GAAG,MAAMf,cAAc,CAAC,CAAC;IACpCgB,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEF,KAAK,CAAC;;IAEnC;IACA,MAAMG,GAAG,GAAG,uCAAuCC,kBAAkB,CAACL,KAAK,CAAC,uBAAuB;IACnGE,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEC,GAAG,CAAC;IAEhC,MAAMjB,QAAQ,GAAG,MAAMC,KAAK,CAACgB,GAAG,EAAE;MAChCd,OAAO,EAAE;QACP,eAAe,EAAE,UAAUW,KAAK;MAClC;IACF,CAAC,CAAC;IAEF,IAAI,CAACd,QAAQ,CAACM,EAAE,EAAE;MAChB,MAAMa,SAAS,GAAG,MAAMnB,QAAQ,CAACoB,IAAI,CAAC,CAAC;MACvCL,OAAO,CAACM,KAAK,CAAC,iBAAiB,EAAEF,SAAS,CAAC;MAC3C,MAAM,IAAIZ,KAAK,CAAC,uBAAuBP,QAAQ,CAACQ,MAAM,WAAWW,SAAS,EAAE,CAAC;IAC/E;IAEA,MAAMV,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;IAClCK,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEP,IAAI,CAAC,CAAC,CAAC;;IAEpC,IAAI,CAACA,IAAI,CAACa,MAAM,IAAI,CAACb,IAAI,CAACa,MAAM,CAACC,KAAK,EAAE;MACtCR,OAAO,CAACM,KAAK,CAAC,oCAAoC,EAAEZ,IAAI,CAAC;MACzD,OAAO,EAAE;IACX;IAEA,MAAMe,kBAAkB,GAAGf,IAAI,CAACa,MAAM,CAACC,KAAK,CAACE,MAAM,CAACC,KAAK,IAAIA,KAAK,CAACC,WAAW,CAAC;IAC/E,MAAMC,aAAa,GAAGJ,kBAAkB,CAACK,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IACpD,OAAOD,aAAa;EACtB,CAAC,CAAC,OAAOP,KAAK,EAAE;IACdN,OAAO,CAACM,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAC9C,OAAO,EAAE;EACX;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}